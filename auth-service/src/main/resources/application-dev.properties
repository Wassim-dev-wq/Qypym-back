# ===============================================
# Application Name
# ===============================================
spring.application.name=auth-service

# ===============================================
# Kafka Configuration
# ===============================================
spring.kafka.bootstrap-servers=fivy-kafka:29092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.properties.spring.json.type.mapping=org.fivy.authservice.domain.event.AuthEvent:AuthEvent
spring.kafka.producer.properties.spring.json.trusted.packages=org.fivy.authservice.domain.event
spring.kafka.producer.properties.enable.idempotence=true
spring.kafka.producer.properties.retries=3
spring.kafka.producer.properties.acks=all

# ===============================================
# Redis Configuration
# ===============================================
spring.data.redis.host=fivy-redis
spring.data.redis.port=6379
spring.data.redis.password=password
spring.data.redis.timeout=2000
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2
spring.data.redis.lettuce.pool.max-wait=-1ms

# ===============================================
# Server Configuration
# ===============================================
server.port=8089
server.error.include-message=always
server.error.include-binding-errors=always

# ===============================================
# Keycloak Configuration
# ===============================================
keycloak.realm=qypym
keycloak.auth-server-url=http://fivy-keycloak:8180
keycloak.client-id=qypym-app
keycloak.client-secret=VaClxVjD1oTwu8TLd4MLcuZidkNAjJGs
keycloak.public-client=false
keycloak.bearer-only=true
keycloak.use-resource-role-mappings=true
keycloak.ssl-required=external
keycloak.confidential-port=0

# ===============================================
# Logging Configuration
# ===============================================
logging.level.org.springframework=INFO
logging.level.org.fivy.authservice=DEBUG
logging.level.org.keycloak=INFO

# ===============================================
# Management Endpoints Configuration
# ===============================================
management.endpoints.web.exposure.include=health,info,metrics
management.health.redis.enabled=true
management.health.kafka.enabled=true

# ===============================================
# Resilience4j Circuit Breaker Configuration
# ===============================================
resilience4j.circuitbreaker.instances.keycloakService.slidingWindowSize=10
resilience4j.circuitbreaker.instances.keycloakService.failureRateThreshold=50
resilience4j.circuitbreaker.instances.keycloakService.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.keycloakService.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.keycloakService.registerHealthIndicator=true

# ===============================================
# Resilience4j Retry Configuration
# ===============================================
resilience4j.retry.instances.keycloakService.maxAttempts=3
resilience4j.retry.instances.keycloakService.waitDuration=1s
resilience4j.retry.instances.keycloakService.enableExponentialBackoff=true
resilience4j.retry.instances.keycloakService.exponentialBackoffMultiplier=2

# ===============================================
# Additional Configuration (If Required)
# ===============================================

# ===============================================
# Postgres Configuration (Uncomment and Configure If Needed)
# ===============================================
# spring.datasource.url=jdbc:postgresql://localhost:5432/fivy_users
# spring.datasource.username=fivy_user
# spring.datasource.password=password
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ===============================================
# Keycloak Database Configuration (Uncomment and Configure If Needed)
# ===============================================
# keycloak.db.url=jdbc:postgresql://localhost:5435/fivy_keycloak
# keycloak.db.username=fivy_kc
# keycloak.db.password=password

# ===============================================
# Admin Credentials (Uncomment and Configure If Needed)
# ===============================================
# keycloak.admin.username=admin
# keycloak.admin.password=password

# ===============================================
# Server Hostname Configuration (Uncomment and Configure If Needed)
# ===============================================
# keycloak.hostname=localhost

# ===============================================
# PgAdmin Configuration (Uncomment and Configure If Needed)
# ===============================================
# pgadmin.email=admin@fivy.com
# pgadmin.password=password

# ===============================================
# Spring Profiles and Debug Configuration
# ===============================================
spring.profiles.active=dev
management.server.port=5006
debug.port=5005

# ===============================================
# Security Considerations
# ===============================================
# Note: Ensure that sensitive information such as passwords and secrets are secured.
# Avoid committing sensitive data to version control systems.
# Consider using Spring Cloud Config, Vault, or environment variables for production environments.

spring.application.name=${AUTH_SERVICE_NAME:auth-service}

spring.kafka.bootstrap-servers=${KAFKA_SERVERS}
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
spring.kafka.producer.properties.spring.json.type.mapping=org.fivy.authservice.domain.event.AuthEvent:AuthEvent
spring.kafka.producer.properties.spring.json.trusted.packages=org.fivy.authservice.domain.event
spring.kafka.producer.properties.enable.idempotence=true
spring.kafka.producer.properties.retries=3
spring.kafka.producer.properties.acks=all

eureka.client.serviceUrl.defaultZone=${SERVICE_REGISTRY_DEFAULTZONE:http://srv-registry-${ENV:dev}:${SERVICE_REGISTRY_CONTAINER_PORT:8761}/eureka}
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.health-check-url-path=/actuator/health

management.endpoints.web.exposure.include=health,info,metrics,gateway
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true

spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT:${REDIS_CONTAINER_PORT:6379}}
spring.data.redis.password=${REDIS_PASSWORD:admin}
spring.data.redis.timeout=2000
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2
spring.data.redis.lettuce.pool.max-wait=-1ms
spring.config.import=${SPRING_CONFIG_IMPORT:optional:configserver:http://config-server:8888}

server.port=${AUTH_SERVICE_PORT:${AUTH_SERVICE_CONTAINER_PORT:8082}}
server.error.include-message=always
server.error.include-binding-errors=always

keycloak.realm=${KC_REALM}
keycloak.auth-server-url=${KC_AUTH_URL}
keycloak.client-id=${KC_CLIENT_ID}
keycloak.client-secret=${KC_CLIENT_SECRET}

logging.level.org.fivy.authservice=DEBUG
logging.level.org.keycloak=DEBUG
